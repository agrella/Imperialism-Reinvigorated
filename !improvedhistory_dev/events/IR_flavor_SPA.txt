namespace = IR_flavor_SPA

#Spanish subjugation of tidore, and tidore gets free colonies
country_event = {
	id = IR_flavor_SPA.5
	title = "IR_flavor_SPA.5.t"
	desc = "IR_flavor_SPA.5.d"
	picture = BATTLE_eventPicture
	
	major = yes
	fire_only_once = yes
	is_triggered_only = yes
	
	trigger = {
		tag = TID
		NOT = { has_country_flag = dom_estaban_tid }
	}
	
	option = {
		name = "IR_flavor_SPA.5.a"
		ai_chance = { factor = 100 }
		tooltip = { FROM = { create_subject = { subject_type = colony subject = ROOT } } }
		set_country_flag = dom_estaban_tid
		kill_ruler = yes
		define_ruler = {
    		name = "Amiruddin Iskandar"
    		dynasty = "Dul-Karna’in"
    		adm = 3
    		dip = 3
    		mil = 3
    		age = 42
    		claim = 90
		}
		if = { 
			limit = { 645 = { is_empty = yes } }
			hidden_effect = {
				645 = {
					change_trade_goods = spices
					change_religion = ROOT	
					change_culture = ROOT
					add_core = ROOT	
				}
			}
			645 = { 
				cede_province = ROOT 
			}
		}
		if = { 
			limit = { 645 = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } } }
			if = {
				limit = { 
					645 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
				}
				hidden_effect = {
					645 = {
						owner = { country_event = { id = orion_seize.1 days = 0 } }
						change_trade_goods = spices
						change_religion = ROOT	
						change_culture = ROOT
						add_core = ROOT	
					}	
				}
				645 = { 
					cede_province = ROOT 
				}
			}
			else_if = {
				limit = { 
					645 = { owner = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } 
				}
				add_permanent_claim = ROOT 
			}
		}
		if = { 
			limit = { 647 = { is_empty = yes } }
			hidden_effect = {
				647 = {
					change_trade_goods = spices
					change_religion = ROOT	
					change_culture = ROOT
					add_core = ROOT	
				}
			}
			647 = { 
				cede_province = ROOT 
			}
		}
		if = { 
			limit = { 647 = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } } }
			if = {
				limit = { 
					647 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
				}
				hidden_effect = {
					647 = {
						owner = { country_event = { id = orion_seize.1 days = 0 } }
						change_trade_goods = spices
						change_religion = ROOT	
						change_culture = ROOT
						add_core = ROOT	
					}	
				}
				647 = { 
					cede_province = ROOT 
				}
			}
			else_if = {
				limit = { 
					647 = { owner = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } 
				}
				add_permanent_claim = ROOT 
			}
		}
		if = { 
			limit = { 2725 = { is_empty = yes } }
			hidden_effect = {
				2725 = {
					change_trade_goods = spices
					change_religion = ROOT	
					change_culture = ROOT
					add_core = ROOT	
				}
			}
			2725 = { 
				cede_province = ROOT 
			}
		}
		if = { 
			limit = { 2725 = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } } }
			if = {
				limit = { 
					2725 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
				}
				hidden_effect = {
					2725 = {
						owner = { country_event = { id = orion_seize.1 days = 0 } }
						change_trade_goods = spices
						change_religion = ROOT	
						change_culture = ROOT
						add_core = ROOT	
					}	
				}
				2725 = { 
					cede_province = ROOT 
				}
			}
			else_if = {
				limit = { 
					2725 = { owner = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } 
				}
				add_permanent_claim = ROOT 
			}
		}
	}
}

