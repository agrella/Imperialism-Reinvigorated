namespace = IR_flavor_POR

#Gomes Monopoly
country_event = {
	id = IR_flavor_POR.1
	title = "IR_flavor_POR.1.t"
	desc = "IR_flavor_POR.1.d"
	picture = EXPLORERS_eventPicture
	
	fire_only_once = yes
	
	mean_time_to_happen = {
		months = 48
	}
	
	trigger = {
		is_year = 1460
		NOT = { is_year = 1500 }
		1111 = { country_or_non_sovereign_subject_hold = ROOT }
		NOT = { has_country_flag = IR_flavor_POR.1_happened }
	}
	
	option = {
		name = "IR_flavor_POR.1.a"
		ai_chance = { factor = 100 }
		add_treasury = -100
		1166 = {
			add_trade_modifier = {
				who = ROOT
				duration = 1825
				power = 40
				key = por_gomes_monopoly
			}
		}
		country_event = { id = IR_flavor_POR.2 years = 5 }
		set_country_flag = IR_flavor_POR.1_happened
	}
	option = {
		name = "IR_flavor_POR.1.b"
		ai_chance = { factor = 0 }
		add_treasury = -200
		1166 = {
			add_trade_modifier = {
				who = ROOT
				duration = 3650
				power = 15
				key = por_royal_monopoly
			}
		}
		set_country_flag = IR_flavor_POR.1_happened
	}
}

#Discovers 1465, 1139 required for Elmina mission
country_event = {
	id = IR_flavor_POR.2
	title = "IR_flavor_POR.2.t"
	desc = "IR_flavor_POR.2.d"
	picture = SHIP_SAILING_eventPicture
	
	fire_only_once = yes
	is_triggered_only = yes
	
	trigger = {
		has_country_flag = IR_flavor_POR.1_happened
	}
	
	option = {
		name = "IR_flavor_POR.2.a"
		ai_chance = { factor = 100 }
		discover_province = 1465
		discover_province = 1139
	}
}

#Bethencourt sells Lanzarote
country_event = {
	id = IR_flavor_POR.3
	title = "IR_flavor_POR.3.t"
	desc = "IR_flavor_POR.3.d"
	picture = ADVISOR_eventPicture
	
	fire_only_once = yes
	
	trigger = {
		is_year = 1447
		has_country_flag = IR_flavor_POR.1_happened
		NOT = { is_year = 1455 }
	}
	
	mean_time_to_happen = {
		months = 12
	}
	
	
	option = {
		name = "IR_flavor_POR.3.a"
		ai_chance = { factor = 75 }
		add_treasury = -100
		hidden_effect = {
			10077 = { add_territorial_core = ROOT }
			CNR = { add_treasury = 100 grant_independence = yes }
		}
		10077 = { cede_province = ROOT }
		CAS = { country_event = { id = IR_flavor_POR.4 days = 1 } }
		set_country_flag = IR_flavor_POR.3_happened
	}
	option = {
		name = "IR_flavor_POR.3.b"
		ai_chance = { factor = 25 }
		#Not interested in offer
		set_country_flag = IR_flavor_POR.3_happened
	}
}

#Castile event notifying sale, and gains CBs
country_event = {
	id = IR_flavor_POR.4
	title = "IR_flavor_POR.4.t"
	desc = "IR_flavor_POR.4.d"
	picture = BANKRUPTCY_eventPicture
	
	fire_only_once = yes
	is_triggered_only = yes
	
	trigger = {
		has_country_flag = IR_flavor_POR.3_happened
	}
	
	option = {
		name = "IR_flavor_POR.4.a"
		ai_chance = { factor = 90 }
		add_treasury = -100
		add_manpower = -3
		create_subject = {
			subject_type = fief
			subject = CNR
		}
		10077 = { add_core = CNR }
	}
	option = {
		name = "IR_flavor_POR.4.b"
		ai_chance = { factor = 10 }
		
	}
}

#Nova Muziris
country_event = {
	id = IR_flavor_POR.5
	title = "IR_flavor_POR.5.t"
	desc = "IR_flavor_POR.5.d"
	picture = BANKRUPTCY_eventPicture
	
	fire_only_once = yes
	
	trigger = {
		NOT = { has_country_flag = IR_flavor_POR.5_happened }
		535 = { owned_by = ROOT }
		is_year = 1520
		NOT = { is_year = 1570 }
	}
	
	mean_time_to_happen = {
		months = 60
	}
	
	option = {
		name = "IR_flavor_POR.5.a"
		ai_chance = { 
			factor = 50 
			modifier = {
				NOT = { treasury = 2000 }
				factor = 0
			}
		}
		add_treasury = -2000
		535 = {
			center_of_trade = 3
			add_permanent_province_modifier = {
				name = por_nova_muziris
				duration = -1
			}
		}
		set_country_flag = IR_flavor_POR.5_happened
	}
	option = {
		name = "IR_flavor_POR.5.b"
		ai_chance = { 
			factor = 50 
			modifier = {
				NOT = { treasury = 2000 }
				factor = 2
			}
		}
		add_prestige = -3
		set_country_flag = IR_flavor_POR.5_happened
	}
}

#A New Order? - India flavor
country_event = {
	id = IR_flavor_POR.6
	title = "IR_flavor_POR.6.t"
	desc = "IR_flavor_POR.6.d"
	picture = OVEREXTENSION_eventPicture
	
	fire_only_once = yes
	
	trigger = {
		NOT = { has_country_flag = IR_flavor_POR.6_happened }
		2030 = { owned_by = ROOT }
	}
	
	mean_time_to_happen = {
		months = 60
	}
	
	option = { #A new Hindustan
		name = "IR_flavor_POR.6.a"
		ai_chance = { factor = 75 }
		
		custom_subject = {
			TOOLTIP = IR_flavor_POR.6.tooltip
			TAG = RJ1
			SUBJECT_TYPE = domain
			PROVINCES = por_india_provinces
			LEADER = Francisco
   			DYNASTY = Ramada
    		ADM = 3 
    		DIP = 3 
    		MIL = 3
    		AGE = 35
    		CLAIM = 75
    		CULTURE = malayalam
    		RELIGION = hinduism
    		FIXED = no
    		GENDER = male
		}
		set_country_flag = IR_flavor_POR.6_happened
	}
	option = { #Keep them divided
		name = "IR_flavor_POR.6.b"
		ai_chance = { factor = 25 }
		
		set_country_flag = IR_flavor_POR.6_happened
	}
}

#Portuguese Civil War
country_event = {
	id = IR_flavor_POR.10
	title = "IR_flavor_POR.10.t"
	desc = "IR_flavor_POR.10.d"
	picture = _eventPicture
	
	
	trigger = {
		is_year = 1444
	}
	mean_time_to_happen = {
		months = 3
	}
}


#Portuguese intervention in Kilwa Succession -> easy control Zanzibar
country_event = {
	id = IR_flavor_POR.20
	title = "IR_flavor_POR.20.t"
	desc = "IR_flavor_POR.20.d"
	picture = BATTLE_eventPicture
	
	major = yes
	fire_only_once = yes
	is_triggered_only = yes
	
	trigger = {
		tag = ZAN
		1201 = { owned_by = ROOT }
		NOT = { has_country_flag = zan_por_coup }
	}
	
	option = {
		name = "IR_flavor_POR.20.a"
		ai_chance = { 
			factor = 100 
			modifier = { 
				FROM = { ai = no }
				factor = 0
			}
		}
		set_country_flag = zan_por_coup
		random_owned_province = {
			limit = { has_port = yes NOT = { province_id = 1201 } }
			spawn_rebels = {
				type = noble_rebels
				friend = POR
				size = 2
				win = yes
			}
		}
		kill_ruler = yes
		define_ruler = {
    		name = "Muhammad"
    		dynasty = "Rukn ad Din"
    		adm = 3
    		dip = 3
    		mil = 3
    		age = 42
    		claim = 50
		}
		hidden_effect = { POR = { country_event = { id = IR_flavor_POR.3 days = 30 random = 30 } } }
	}
	option = {
		name = "IR_flavor_POR.20.b"
		ai_chance = { 
			factor = 100 
			modifier = { 
				FROM = { ai = yes }
				factor = 0
			}
		}
		set_country_flag = zan_por_coup
		POR = { set_country_flag = easy_zan_control }
		hidden_effect = { POR = { country_event = { id = IR_flavor_POR.3 days = 30 random = 30 } } }
	}
}

#Portuguese intervention in Kilwa Succession -> easy control Zanzibar pt.2
country_event = {
	id = IR_flavor_POR.21
	title = "IR_flavor_POR.21.t"
	desc = "IR_flavor_POR.21.d"
	picture = BATTLE_eventPicture
	
	fire_only_once = yes
	is_triggered_only = yes
	
	trigger = {
		ZAN = { has_country_flag = zan_por_coup }
	}
	
	option = {
		name = "IR_flavor_POR.21.a"
		ai_chance = { factor = 100 }
		declare_war_with_cb = {
			who = ZAN			
			casus_belli = cb_vassalize_mission
		}
		if = { 
			limit = { has_country_flag = easy_zan_control }
			1201 = { change_controller = ROOT }	
		}
	}
}

#Portuguese subjugation of ternate, and ternate gets free colonies
country_event = {
	id = IR_flavor_POR.40
	title = "IR_flavor_POR.40.t"
	desc = "IR_flavor_POR.40.d"
	picture = BATTLE_eventPicture
	
	major = yes
	fire_only_once = yes
	is_triggered_only = yes
	
	trigger = {
		tag = TER
		NOT = { has_country_flag = dom_manuel_ter }
		
	}
	
	option = {
		name = "IR_flavor_POR.40.a"
		ai_chance = { factor = 100 }
		tooltip = { FROM = { create_subject = { subject_type = colony subject = ROOT } } }
		set_country_flag = dom_manuel_ter
		kill_ruler = yes
		define_ruler = {
    		name = "Dom Manuel"
    		dynasty = "Tabariji"
    		adm = 3
    		dip = 3
    		mil = 3
    		age = 42
    		claim = 90
		}
		if = { 
			limit = { 644 = { is_empty = yes } }
			hidden_effect = {
				644 = {
					change_trade_goods = spices
					change_religion = ROOT	
					change_culture = ROOT
					add_core = ROOT	
				}
			}
			644 = { 
				cede_province = ROOT 
			}
		}
		if = { 
			limit = { 644 = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } } }
			if = {
				limit = { 
					644 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
				}
				hidden_effect = {
					644 = {
						owner = { country_event = { id = orion_seize.1 days = 0 } }
						change_trade_goods = spices
						change_religion = ROOT	
						change_culture = ROOT
						add_core = ROOT	
					}	
				}
				644 = { 
					cede_province = ROOT 
				}
			}
			else_if = {
				limit = { 
					644 = { owner = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } 
				}
				add_permanent_claim = ROOT 
			}
		}
		if = { 
			limit = { 1245 = { is_empty = yes } }
			hidden_effect = {
				1245 = {
					change_trade_goods = spices
					change_religion = ROOT	
					change_culture = ROOT
					add_core = ROOT	
				}
			}
			1245 = { 
				cede_province = ROOT 
			}
		}
		if = { 
			limit = { 1245 = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } } }
			if = {
				limit = { 
					1245 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
				}
				hidden_effect = {
					1245 = {
						owner = { country_event = { id = orion_seize.1 days = 0 } }
						change_trade_goods = spices
						change_religion = ROOT	
						change_culture = ROOT
						add_core = ROOT	
					}	
				}
				1245 = { 
					cede_province = ROOT 
				}
			}
			else_if = {
				limit = { 
					1245 = { owner = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } 
				}
				add_permanent_claim = ROOT 
			}
		}
		if = { 
			limit = { 2717 = { is_empty = yes } }
			hidden_effect = {
				2717 = {
					change_trade_goods = spices
					change_religion = ROOT	
					change_culture = ROOT
					add_core = ROOT	
				}
			}
			2717 = { 
				cede_province = ROOT 
			}
		}
		if = { 
			limit = { 2717 = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } } }
			if = {
				limit = { 
					2717 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
				}
				hidden_effect = {
					2717 = {
						owner = { country_event = { id = orion_seize.1 days = 0 } }
						change_trade_goods = spices
						change_religion = ROOT	
						change_culture = ROOT
						add_core = ROOT	
					}	
				}
				2717 = { 
					cede_province = ROOT 
				}
			}
			else_if = {
				limit = { 
					2717 = { owner = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } 
				}
				add_permanent_claim = ROOT 
			}
		}
		if = { 
			limit = { 2718 = { is_empty = yes } }
			hidden_effect = {
				2718 = {
					change_trade_goods = spices
					change_religion = ROOT	
					change_culture = ROOT
					add_core = ROOT	
				}
			}
			2718 = { 
				cede_province = ROOT 
			}
		}
		if = { 
			limit = { 2718 = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } } }
			if = {
				limit = { 
					2718 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
				}
				hidden_effect = {
					2718 = {
						owner = { country_event = { id = orion_seize.1 days = 0 } }
						change_trade_goods = spices
						change_religion = ROOT	
						change_culture = ROOT
						add_core = ROOT	
					}	
				}
				2718 = { 
					cede_province = ROOT 
				}
			}
			else_if = {
				limit = { 
					2718 = { owner = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } 
				}
				add_permanent_claim = ROOT 
			}
		}
	}
}

#Spanish subjugation of tidore, and tidore gets free colonies
country_event = {
	id = IR_flavor_POR.5
	title = "IR_flavor_POR.5.t"
	desc = "IR_flavor_POR.5.d"
	picture = BATTLE_eventPicture
	
	major = yes
	fire_only_once = yes
	is_triggered_only = yes
	
	trigger = {
		tag = TID
		NOT = { has_country_flag = dom_estaban_tid }
	}
	
	option = {
		name = "IR_flavor_POR.5.a"
		ai_chance = { factor = 100 }
		tooltip = { FROM = { create_subject = { subject_type = colony subject = ROOT } } }
		set_country_flag = dom_estaban_tid
		kill_ruler = yes
		define_ruler = {
    		name = "Amiruddin Iskandar"
    		dynasty = "Dul-Karna’in"
    		adm = 3
    		dip = 3
    		mil = 3
    		age = 42
    		claim = 90
		}
		if = { 
			limit = { 645 = { is_empty = yes } }
			hidden_effect = {
				645 = {
					change_trade_goods = spices
					change_religion = ROOT	
					change_culture = ROOT
					add_core = ROOT	
				}
			}
			645 = { 
				cede_province = ROOT 
			}
		}
		if = { 
			limit = { 645 = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } } }
			if = {
				limit = { 
					645 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
				}
				hidden_effect = {
					645 = {
						owner = { country_event = { id = orion_seize.1 days = 0 } }
						change_trade_goods = spices
						change_religion = ROOT	
						change_culture = ROOT
						add_core = ROOT	
					}	
				}
				645 = { 
					cede_province = ROOT 
				}
			}
			else_if = {
				limit = { 
					645 = { owner = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } 
				}
				add_permanent_claim = ROOT 
			}
		}
		if = { 
			limit = { 647 = { is_empty = yes } }
			hidden_effect = {
				647 = {
					change_trade_goods = spices
					change_religion = ROOT	
					change_culture = ROOT
					add_core = ROOT	
				}
			}
			647 = { 
				cede_province = ROOT 
			}
		}
		if = { 
			limit = { 647 = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } } }
			if = {
				limit = { 
					647 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
				}
				hidden_effect = {
					647 = {
						owner = { country_event = { id = orion_seize.1 days = 0 } }
						change_trade_goods = spices
						change_religion = ROOT	
						change_culture = ROOT
						add_core = ROOT	
					}	
				}
				647 = { 
					cede_province = ROOT 
				}
			}
			else_if = {
				limit = { 
					647 = { owner = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } 
				}
				add_permanent_claim = ROOT 
			}
		}
		if = { 
			limit = { 2725 = { is_empty = yes } }
			hidden_effect = {
				2725 = {
					change_trade_goods = spices
					change_religion = ROOT	
					change_culture = ROOT
					add_core = ROOT	
				}
			}
			2725 = { 
				cede_province = ROOT 
			}
		}
		if = { 
			limit = { 2725 = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } } }
			if = {
				limit = { 
					2725 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
				}
				hidden_effect = {
					2725 = {
						owner = { country_event = { id = orion_seize.1 days = 0 } }
						change_trade_goods = spices
						change_religion = ROOT	
						change_culture = ROOT
						add_core = ROOT	
					}	
				}
				2725 = { 
					cede_province = ROOT 
				}
			}
			else_if = {
				limit = { 
					2725 = { owner = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } 
				}
				add_permanent_claim = ROOT 
			}
		}
	}
}

